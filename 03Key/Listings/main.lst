C51 COMPILER V9.60.7.0   MAIN                                                              08/26/2025 23:02:07 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Obj
                    -ects\main.obj)

line level    source

   1          #include <STC89C5xRC.H>
   2          
   3          typedef unsigned char u8;
   4            
   5          unsigned char smg_code[11]={0x3f, 0x06, 0x5b, 0x4f, 0x66, 0x6d, 0x7d, 0x07, 0x7f, 0x6f, 0x00};
   6          
   7          
   8          void Delay10us(void)  //@11.0592MHz
   9          {
  10   1        unsigned char data i;
  11   1      
  12   1        i = 2;
  13   1        while (--i);
  14   1      }
  15          
  16          void Delayms(unsigned int ms){
  17   1        ms *= 100;
  18   1        while(ms--){
  19   2        Delay10us();
  20   2        }
  21   1      }
  22          
  23          unsigned char smg_buff[8]={10,10,10,10,10,10,10,10};//0-9
  24          void smg_show(void){
  25   1        int i = 0;
  26   1        for(i=0; i<8; i++){
  27   2          switch(i){
  28   3            case 0: P22 = 1;P23 = 1;P24 = 1;break;
  29   3            case 1: P22 = 0;P23 = 1;P24 = 1;break;
  30   3            case 2: P22 = 1;P23 = 0;P24 = 1;break;
  31   3            case 3: P22 = 0;P23 = 0;P24 = 1;break;
  32   3            case 4: P22 = 1;P23 = 1;P24 = 0;break;
  33   3            case 5: P22 = 0;P23 = 1;P24 = 0;break;
  34   3            case 6: P22 = 1;P23 = 0;P24 = 0;break;
  35   3            case 7: P22 = 0;P23 = 0;P24 = 0;break;
  36   3          }
  37   2          P0 = smg_code[smg_buff[i]];
  38   2          Delay10us();
  39   2          P0 = 0x00;
  40   2        }
  41   1      }
  42          void smg_num(unsigned long num){
  43   1        int i=0;
  44   1        for(i=7;i>=0;i--){
  45   2          smg_buff[i] = num%10;
  46   2          num /= 10;
  47   2        }
  48   1      }
  49          u8 key_scan(void){
  50   1        static u8 key=1;
  51   1        if(key==1 && (P31 == 0)){
  52   2          Delayms(20);
  53   2          key=0;
  54   2          if(P31 == 0) return 1;
C51 COMPILER V9.60.7.0   MAIN                                                              08/26/2025 23:02:07 PAGE 2   

  55   2        }else if(P31 == 1 ){
  56   2          key=1;
  57   2        }
  58   1        return 0;
  59   1      }
  60          void main(){
  61   1        unsigned long num = 00000000;
  62   1        u8 key=0;
  63   1        //Delayms(1000);
  64   1        
  65   1        //smg_buff[0]=0;
  66   1        smg_num(num);
  67   1        while(1){
  68   2          smg_show();
  69   2          key = key_scan();
  70   2          if(key == 1){
  71   3            P20=!P20;
  72   3          }
  73   2        }
  74   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    302    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     20       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
